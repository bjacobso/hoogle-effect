{
  "id": "HttpLayerRouter.addHttpApi",
  "name": "addHttpApi",
  "module": "HttpLayerRouter",
  "package": "@effect/platform",
  "signature": "<Id extends string, Groups extends HttpApiGroup.HttpApiGroup.Any, E, R>(api: HttpApi<Id, Groups, E, R>, options?: { readonly openapiPath?: `/${string}`; }) => Layer<never, never, HttpRouter | R | Generator | FileSystem | HttpPlatform | Path | HttpApiGroup.ToService<Id, Groups> | HttpApiGroup.ErrorContext<Groups>>",
  "description": "",
  "documentation": "```ts\nimport * as NodeHttpServer from \"@effect/platform-node/NodeHttpServer\"\nimport * as NodeRuntime from \"@effect/platform-node/NodeRuntime\"\nimport * as HttpApi from \"@effect/platform/HttpApi\"\nimport * as HttpApiBuilder from \"@effect/platform/HttpApiBuilder\"\nimport * as HttpApiEndpoint from \"@effect/platform/HttpApiEndpoint\"\nimport * as HttpApiGroup from \"@effect/platform/HttpApiGroup\"\nimport * as HttpApiScalar from \"@effect/platform/HttpApiScalar\"\nimport * as HttpLayerRouter from \"@effect/platform/HttpLayerRouter\"\nimport * as HttpMiddleware from \"@effect/platform/HttpMiddleware\"\nimport * as Effect from \"effect/Effect\"\nimport * as Layer from \"effect/Layer\"\nimport { createServer } from \"http\"\n\n// First, we define our HttpApi\nclass MyApi extends HttpApi.make(\"api\").add(\nHttpApiGroup.make(\"users\").add(\nHttpApiEndpoint.get(\"me\", \"/me\")\n).prefix(\"/users\")\n) {}\n\n// Implement the handlers for the API\nconst UsersApiLayer = HttpApiBuilder.group(MyApi, \"users\", (handers) => handers.handle(\"me\", () => Effect.void))\n\n// Use `HttpLayerRouter.addHttpApi` to register the API with the router\nconst HttpApiRoutes = HttpLayerRouter.addHttpApi(MyApi, {\nopenapiPath: \"/docs/openapi.json\"\n}).pipe(\n// Provide the api handlers layer\nLayer.provide(UsersApiLayer)\n)\n\n// Create a /docs route for the API documentation\nconst DocsRoute = HttpApiScalar.layerHttpLayerRouter({\napi: MyApi,\npath: \"/docs\"\n})\n\nconst CorsMiddleware = HttpLayerRouter.middleware(HttpMiddleware.cors())\n// You can also use HttpLayerRouter.cors() to create a CORS middleware\n\n// Finally, we merge all routes and serve them using the Node HTTP server\nconst AllRoutes = Layer.mergeAll(\nHttpApiRoutes,\nDocsRoute\n).pipe(\nLayer.provide(CorsMiddleware.layer)\n)\n\nHttpLayerRouter.serve(AllRoutes).pipe(\nLayer.provide(NodeHttpServer.layer(createServer, { port: 3000 })),\nLayer.launch,\nNodeRuntime.runMain\n)\n```",
  "examples": [
    {
      "code": "import * as NodeHttpServer from \"@effect/platform-node/NodeHttpServer\"\nimport * as NodeRuntime from \"@effect/platform-node/NodeRuntime\"\nimport * as HttpApi from \"@effect/platform/HttpApi\"\nimport * as HttpApiBuilder from \"@effect/platform/HttpApiBuilder\"\nimport * as HttpApiEndpoint from \"@effect/platform/HttpApiEndpoint\"\nimport * as HttpApiGroup from \"@effect/platform/HttpApiGroup\"\nimport * as HttpApiScalar from \"@effect/platform/HttpApiScalar\"\nimport * as HttpLayerRouter from \"@effect/platform/HttpLayerRouter\"\nimport * as HttpMiddleware from \"@effect/platform/HttpMiddleware\"\nimport * as Effect from \"effect/Effect\"\nimport * as Layer from \"effect/Layer\"\nimport { createServer } from \"http\"\n\n// First, we define our HttpApi\nclass MyApi extends HttpApi.make(\"api\").add(\nHttpApiGroup.make(\"users\").add(\nHttpApiEndpoint.get(\"me\", \"/me\")\n).prefix(\"/users\")\n) {}\n\n// Implement the handlers for the API\nconst UsersApiLayer = HttpApiBuilder.group(MyApi, \"users\", (handers) => handers.handle(\"me\", () => Effect.void))\n\n// Use `HttpLayerRouter.addHttpApi` to register the API with the router\nconst HttpApiRoutes = HttpLayerRouter.addHttpApi(MyApi, {\nopenapiPath: \"/docs/openapi.json\"\n}).pipe(\n// Provide the api handlers layer\nLayer.provide(UsersApiLayer)\n)\n\n// Create a /docs route for the API documentation\nconst DocsRoute = HttpApiScalar.layerHttpLayerRouter({\napi: MyApi,\npath: \"/docs\"\n})\n\nconst CorsMiddleware = HttpLayerRouter.middleware(HttpMiddleware.cors())\n// You can also use HttpLayerRouter.cors() to create a CORS middleware\n\n// Finally, we merge all routes and serve them using the Node HTTP server\nconst AllRoutes = Layer.mergeAll(\nHttpApiRoutes,\nDocsRoute\n).pipe(\nLayer.provide(CorsMiddleware.layer)\n)\n\nHttpLayerRouter.serve(AllRoutes).pipe(\nLayer.provide(NodeHttpServer.layer(createServer, { port: 3000 })),\nLayer.launch,\nNodeRuntime.runMain\n)"
    }
  ],
  "tags": [
    "HttpApi"
  ],
  "since": "1.0.0",
  "sourceFile": "/Users/benjacobson/conductor/workspaces/hoogle-effect/san-juan-v1/packages/api/node_modules/@effect/platform/dist/dts/HttpLayerRouter.d.ts",
  "sourceLine": 540,
  "githubUrl": "https://github.com/Effect-TS/effect/blob/main/packages/platform/src/HttpLayerRouter.ts#L540"
}