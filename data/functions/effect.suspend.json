{
  "id": "Effect.suspend",
  "name": "suspend",
  "module": "Effect",
  "package": "effect",
  "signature": "<A, E, R>(effect: LazyArg<Effect<A, E, R>>) => Effect<A, E, R>",
  "description": "Delays the creation of an `Effect` until it is actually needed.\n*Details The `Effect.suspend` function takes a thunk that represents the effect and\nwraps it in a suspended effect. This means the effect will not be created\nuntil it is explicitly needed, which is helpful in various scenarios:\n- Lazy Evaluation: Helps optimize performance by deferring computations,\nespecially when the effect might not be needed, or when its computation is\nexpensive. This also ensures that any side effects or scoped captures are\nre-executed on each invocation.\n- Handling Circular Dependencies: Useful in managing circular\ndependencies, such as recursive functions that need to avoid eager\nevaluation to prevent stack overflow.\n- Unifying Return Types: Can help TypeScript unify return types in\nsituations where multiple branches of logic return different effects,\nsimplifying type inference.\n*When to Use Use this function when you need to defer the evaluation of an effect until it\nis required. This is particularly useful for optimizing expensive\ncomputations, managing circular dependencies, or resolving type inference\nissues.\n*Example (Lazy Evaluation with Side Effects) *Example (Recursive Fibonacci) *Example (Using Effect.suspend to Help TypeScript Infer Types)",
  "documentation": "Delays the creation of an `Effect` until it is actually needed.\n*Details**\n\nThe `Effect.suspend` function takes a thunk that represents the effect and\nwraps it in a suspended effect. This means the effect will not be created\nuntil it is explicitly needed, which is helpful in various scenarios:\n- **Lazy Evaluation**: Helps optimize performance by deferring computations,\nespecially when the effect might not be needed, or when its computation is\nexpensive. This also ensures that any side effects or scoped captures are\nre-executed on each invocation.\n- **Handling Circular Dependencies**: Useful in managing circular\ndependencies, such as recursive functions that need to avoid eager\nevaluation to prevent stack overflow.\n- **Unifying Return Types**: Can help TypeScript unify return types in\nsituations where multiple branches of logic return different effects,\nsimplifying type inference.\n*When to Use**\n\nUse this function when you need to defer the evaluation of an effect until it\nis required. This is particularly useful for optimizing expensive\ncomputations, managing circular dependencies, or resolving type inference\nissues.\n*Example** (Lazy Evaluation with Side Effects)\n\n```ts\nimport { Effect } from \"effect\"\n\nlet i = 0\n\nconst bad = Effect.succeed(i++)\n\nconst good = Effect.suspend(() => Effect.succeed(i++))\n\nconsole.log(Effect.runSync(bad)) // Output: 0\nconsole.log(Effect.runSync(bad)) // Output: 0\n\nconsole.log(Effect.runSync(good)) // Output: 1\nconsole.log(Effect.runSync(good)) // Output: 2\n```\n*Example** (Recursive Fibonacci)\n\n```ts\nimport { Effect } from \"effect\"\n\nconst blowsUp = (n: number): Effect.Effect<number> =>\nn < 2\n? Effect.succeed(1)\n: Effect.zipWith(blowsUp(n - 1), blowsUp(n - 2), (a, b) => a + b)\n\nconsole.log(Effect.runSync(blowsUp(32)))\n// crash: JavaScript heap out of memory\n\nconst allGood = (n: number): Effect.Effect<number> =>\nn < 2\n? Effect.succeed(1)\n: Effect.zipWith(\nEffect.suspend(() => allGood(n - 1)),\nEffect.suspend(() => allGood(n - 2)),\n(a, b) => a + b\n)\n\nconsole.log(Effect.runSync(allGood(32)))\n// Output: 3524578\n```\n*Example** (Using Effect.suspend to Help TypeScript Infer Types)\n\n```ts\nimport { Effect } from \"effect\"\n\n// Without suspend, TypeScript may struggle with type inference.\n// Inferred type:\n// (a: number, b: number) =>\n// Effect<never, Error, never> | Effect<number, never, never>\nconst withoutSuspend = (a: number, b: number) =>\nb === 0\n? Effect.fail(new Error(\"Cannot divide by zero\"))\n: Effect.succeed(a / b)\n\n// Using suspend to unify return types.\n// Inferred type:\n// (a: number, b: number) => Effect<number, Error, never>\nconst withSuspend = (a: number, b: number) =>\nEffect.suspend(() =>\nb === 0\n? Effect.fail(new Error(\"Cannot divide by zero\"))\n: Effect.succeed(a / b)\n)\n```",
  "examples": [
    {
      "code": "import { Effect } from \"effect\"\n\nlet i = 0\n\nconst bad = Effect.succeed(i++)\n\nconst good = Effect.suspend(() => Effect.succeed(i++))\n\nconsole.log(Effect.runSync(bad)) // Output: 0\nconsole.log(Effect.runSync(bad)) // Output: 0\n\nconsole.log(Effect.runSync(good)) // Output: 1\nconsole.log(Effect.runSync(good)) // Output: 2"
    },
    {
      "code": "import { Effect } from \"effect\"\n\nconst blowsUp = (n: number): Effect.Effect<number> =>\nn < 2\n? Effect.succeed(1)\n: Effect.zipWith(blowsUp(n - 1), blowsUp(n - 2), (a, b) => a + b)\n\nconsole.log(Effect.runSync(blowsUp(32)))\n// crash: JavaScript heap out of memory\n\nconst allGood = (n: number): Effect.Effect<number> =>\nn < 2\n? Effect.succeed(1)\n: Effect.zipWith(\nEffect.suspend(() => allGood(n - 1)),\nEffect.suspend(() => allGood(n - 2)),\n(a, b) => a + b\n)\n\nconsole.log(Effect.runSync(allGood(32)))\n// Output: 3524578"
    },
    {
      "code": "import { Effect } from \"effect\"\n\n// Without suspend, TypeScript may struggle with type inference.\n// Inferred type:\n// (a: number, b: number) =>\n// Effect<never, Error, never> | Effect<number, never, never>\nconst withoutSuspend = (a: number, b: number) =>\nb === 0\n? Effect.fail(new Error(\"Cannot divide by zero\"))\n: Effect.succeed(a / b)\n\n// Using suspend to unify return types.\n// Inferred type:\n// (a: number, b: number) => Effect<number, Error, never>\nconst withSuspend = (a: number, b: number) =>\nEffect.suspend(() =>\nb === 0\n? Effect.fail(new Error(\"Cannot divide by zero\"))\n: Effect.succeed(a / b)\n)"
    }
  ],
  "tags": [
    "Creating Effects"
  ],
  "since": "2.0.0",
  "sourceFile": "/Users/benjacobson/conductor/workspaces/hoogle-effect/san-juan-v1/packages/api/node_modules/effect/dist/dts/effect.d.ts",
  "sourceLine": 5399,
  "githubUrl": "https://github.com/Effect-TS/effect/blob/main/packages/effect/src/effect.ts#L5399"
}