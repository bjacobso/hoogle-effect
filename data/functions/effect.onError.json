{
  "id": "Effect.onError",
  "name": "onError",
  "module": "Effect",
  "package": "effect",
  "signature": "{ <E, X, R2>(cleanup: (cause: Cause<E>) => Effect<X, never, R2>): <A, R>(self: Effect<A, E, R>) => Effect<A, E, R2 | R>; <A, E, R, X, R2>(self: Effect<A, E, R>, cleanup: (cause: Cause<E>) => Effect<X, never, R2>): Effect<A, E, R | R2>; }",
  "description": "Ensures a cleanup effect runs whenever the calling effect fails, providing\nthe failure cause to the cleanup effect.\n*Details This function allows you to attach a cleanup effect that runs whenever the\ncalling effect fails. The cleanup effect receives the cause of the failure,\nallowing you to perform actions such as logging, releasing resources, or\nexecuting additional recovery logic based on the error. The cleanup effect\nwill execute even if the failure is due to interruption. Importantly, the cleanup effect itself is uninterruptible, ensuring that it\ncompletes regardless of external interruptions.\n*Example (Running Cleanup Only on Failure)",
  "documentation": "Ensures a cleanup effect runs whenever the calling effect fails, providing\nthe failure cause to the cleanup effect.\n*Details**\n\nThis function allows you to attach a cleanup effect that runs whenever the\ncalling effect fails. The cleanup effect receives the cause of the failure,\nallowing you to perform actions such as logging, releasing resources, or\nexecuting additional recovery logic based on the error. The cleanup effect\nwill execute even if the failure is due to interruption.\n\nImportantly, the cleanup effect itself is uninterruptible, ensuring that it\ncompletes regardless of external interruptions.\n*Example** (Running Cleanup Only on Failure)\n\n```ts\nimport { Console, Effect } from \"effect\"\n\n// This handler logs the failure cause when the effect fails\nconst handler = Effect.onError((cause) =>\nConsole.log(`Cleanup completed: ${cause}`)\n)\n\n// Define a successful effect\nconst success = Console.log(\"Task completed\").pipe(\nEffect.as(\"some result\"),\nhandler\n)\n\nEffect.runFork(success)\n// Output:\n// Task completed\n\n// Define a failing effect\nconst failure = Console.log(\"Task failed\").pipe(\nEffect.andThen(Effect.fail(\"some error\")),\nhandler\n)\n\nEffect.runFork(failure)\n// Output:\n// Task failed\n// Cleanup completed: Error: some error\n\n// Define a failing effect\nconst defect = Console.log(\"Task failed with defect\").pipe(\nEffect.andThen(Effect.die(\"Boom!\")),\nhandler\n)\n\nEffect.runFork(defect)\n// Output:\n// Task failed with defect\n// Cleanup completed: Error: Boom!\n\n// Define an interrupted effect\nconst interruption = Console.log(\"Task interrupted\").pipe(\nEffect.andThen(Effect.interrupt),\nhandler\n)\n\nEffect.runFork(interruption)\n// Output:\n// Task interrupted\n// Cleanup completed: All fibers interrupted without errors.\n```",
  "examples": [
    {
      "code": "import { Console, Effect } from \"effect\"\n\n// This handler logs the failure cause when the effect fails\nconst handler = Effect.onError((cause) =>\nConsole.log(`Cleanup completed: ${cause}`)\n)\n\n// Define a successful effect\nconst success = Console.log(\"Task completed\").pipe(\nEffect.as(\"some result\"),\nhandler\n)\n\nEffect.runFork(success)\n// Output:\n// Task completed\n\n// Define a failing effect\nconst failure = Console.log(\"Task failed\").pipe(\nEffect.andThen(Effect.fail(\"some error\")),\nhandler\n)\n\nEffect.runFork(failure)\n// Output:\n// Task failed\n// Cleanup completed: Error: some error\n\n// Define a failing effect\nconst defect = Console.log(\"Task failed with defect\").pipe(\nEffect.andThen(Effect.die(\"Boom!\")),\nhandler\n)\n\nEffect.runFork(defect)\n// Output:\n// Task failed with defect\n// Cleanup completed: Error: Boom!\n\n// Define an interrupted effect\nconst interruption = Console.log(\"Task interrupted\").pipe(\nEffect.andThen(Effect.interrupt),\nhandler\n)\n\nEffect.runFork(interruption)\n// Output:\n// Task interrupted\n// Cleanup completed: All fibers interrupted without errors."
    }
  ],
  "tags": [
    "Scoping, Resources & Finalization"
  ],
  "since": "2.0.0",
  "sourceFile": "/Users/benjacobson/conductor/workspaces/hoogle-effect/san-juan-v1/packages/api/node_modules/effect/dist/dts/effect.d.ts",
  "sourceLine": 10568,
  "githubUrl": "https://github.com/Effect-TS/effect/blob/main/packages/effect/src/effect.ts#L10568"
}