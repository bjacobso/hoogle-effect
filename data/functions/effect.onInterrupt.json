{
  "id": "Effect.onInterrupt",
  "name": "onInterrupt",
  "module": "Effect",
  "package": "effect",
  "signature": "{ <X, R2>(cleanup: (interruptors: HashSet<FiberId>) => Effect<X, never, R2>): <A, E, R>(self: Effect<A, E, R>) => Effect<A, E, R2 | R>; <A, E, R, X, R2>(self: Effect<A, E, R>, cleanup: (interruptors: HashSet<FiberId>) => Effect<X, never, R2>): Effect<A, E, R | R2>; }",
  "description": "Registers a cleanup effect to run when an effect is interrupted.\n*Details This function allows you to specify an effect to run when the fiber is\ninterrupted. This effect will be executed when the fiber is interrupted,\nallowing you to perform cleanup or other actions.\n*Example (Running a Cleanup Action on Interruption)",
  "documentation": "Registers a cleanup effect to run when an effect is interrupted.\n*Details**\n\nThis function allows you to specify an effect to run when the fiber is\ninterrupted. This effect will be executed when the fiber is interrupted,\nallowing you to perform cleanup or other actions.\n*Example** (Running a Cleanup Action on Interruption)\n\n```ts\nimport { Console, Effect } from \"effect\"\n\n// This handler is executed when the fiber is interrupted\nconst handler = Effect.onInterrupt((_fibers) => Console.log(\"Cleanup completed\"))\n\nconst success = Console.log(\"Task completed\").pipe(Effect.as(\"some result\"), handler)\n\nEffect.runFork(success)\n// Output:\n// Task completed\n\nconst failure = Console.log(\"Task failed\").pipe(Effect.andThen(Effect.fail(\"some error\")), handler)\n\nEffect.runFork(failure)\n// Output:\n// Task failed\n\nconst interruption = Console.log(\"Task interrupted\").pipe(Effect.andThen(Effect.interrupt), handler)\n\nEffect.runFork(interruption)\n// Output:\n// Task interrupted\n// Cleanup completed\n```",
  "examples": [
    {
      "code": "import { Console, Effect } from \"effect\"\n\n// This handler is executed when the fiber is interrupted\nconst handler = Effect.onInterrupt((_fibers) => Console.log(\"Cleanup completed\"))\n\nconst success = Console.log(\"Task completed\").pipe(Effect.as(\"some result\"), handler)\n\nEffect.runFork(success)\n// Output:\n// Task completed\n\nconst failure = Console.log(\"Task failed\").pipe(Effect.andThen(Effect.fail(\"some error\")), handler)\n\nEffect.runFork(failure)\n// Output:\n// Task failed\n\nconst interruption = Console.log(\"Task interrupted\").pipe(Effect.andThen(Effect.interrupt), handler)\n\nEffect.runFork(interruption)\n// Output:\n// Task interrupted\n// Cleanup completed"
    }
  ],
  "tags": [
    "Interruption"
  ],
  "since": "2.0.0",
  "sourceFile": "/Users/benjacobson/conductor/workspaces/hoogle-effect/san-juan-v1/packages/api/node_modules/effect/dist/dts/effect.d.ts",
  "sourceLine": 8756,
  "githubUrl": "https://github.com/Effect-TS/effect/blob/main/packages/effect/src/effect.ts#L8756"
}