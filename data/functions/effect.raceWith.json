{
  "id": "Effect.raceWith",
  "name": "raceWith",
  "module": "Effect",
  "package": "effect",
  "signature": "{ <A1, E1, R1, E, A, A2, E2, R2, A3, E3, R3>(other: Effect<A1, E1, R1>, options: { readonly onSelfDone: (exit: Exit<A, E>, fiber: Fiber<A1, E1>) => Effect<A2, E2, R2>; readonly onOtherDone: (exit: Exit<A1, E1>, fiber: Fiber<A, E>) => Effect<A3, E3, R3>; }): <R>(self: Effect<A, E, R>) => Effect<A2 | A3, E2 | E3, R1 | R2 | R3 | R>; <A, E, R, A1, E1, R1, A2, E2, R2, A3, E3, R3>(self: Effect<A, E, R>, other: Effect<A1, E1, R1>, options: { readonly onSelfDone: (exit: Exit<A, E>, fiber: Fiber<A1, E1>) => Effect<A2, E2, R2>; readonly onOtherDone: (exit: Exit<A1, E1>, fiber: Fiber<A, E>) => Effect<A3, E3, R3>; }): Effect<A2 | A3, E2 | E3, R | R1 | R2 | R3>; }",
  "description": "Races two effects and calls a finisher when the first one completes.\n*Details This function runs two effects concurrently and calls a specified “finisher”\nfunction once one of the effects completes, regardless of whether it succeeds\nor fails. The finisher functions for each effect allow you to handle the results of\neach effect as soon as they complete. The function takes two finisher callbacks, one for each effect, and allows\nyou to specify how to handle the result of the race.\n*When to Use This function is useful when you need to react to the completion of either\neffect without waiting for both to finish. It can be used whenever you want\nto take action based on the first available result.\n*Example (Handling Results of Concurrent Tasks)",
  "documentation": "Races two effects and calls a finisher when the first one completes.\n*Details**\n\nThis function runs two effects concurrently and calls a specified “finisher”\nfunction once one of the effects completes, regardless of whether it succeeds\nor fails.\n\nThe finisher functions for each effect allow you to handle the results of\neach effect as soon as they complete.\n\nThe function takes two finisher callbacks, one for each effect, and allows\nyou to specify how to handle the result of the race.\n*When to Use**\n\nThis function is useful when you need to react to the completion of either\neffect without waiting for both to finish. It can be used whenever you want\nto take action based on the first available result.\n*Example** (Handling Results of Concurrent Tasks)\n\n```ts\nimport { Effect, Console } from \"effect\"\n\nconst task1 = Effect.succeed(\"task1\").pipe(\nEffect.delay(\"100 millis\"),\nEffect.tap(Console.log(\"task1 done\")),\nEffect.onInterrupt(() =>\nConsole.log(\"task1 interrupted\").pipe(Effect.delay(\"100 millis\"))\n)\n)\nconst task2 = Effect.succeed(\"task2\").pipe(\nEffect.delay(\"200 millis\"),\nEffect.tap(Console.log(\"task2 done\")),\nEffect.onInterrupt(() =>\nConsole.log(\"task2 interrupted\").pipe(Effect.delay(\"100 millis\"))\n)\n)\n\nconst program = Effect.raceWith(task1, task2, {\nonSelfDone: (exit) => Console.log(`task1 exited with ${exit}`),\nonOtherDone: (exit) => Console.log(`task2 exited with ${exit}`)\n})\n\nEffect.runFork(program)\n// Output:\n// task1 done\n// task1 exited with {\n// \"_id\": \"Exit\",\n// \"_tag\": \"Success\",\n// \"value\": \"task1\"\n// }\n// task2 interrupted\n```",
  "examples": [
    {
      "code": "import { Effect, Console } from \"effect\"\n\nconst task1 = Effect.succeed(\"task1\").pipe(\nEffect.delay(\"100 millis\"),\nEffect.tap(Console.log(\"task1 done\")),\nEffect.onInterrupt(() =>\nConsole.log(\"task1 interrupted\").pipe(Effect.delay(\"100 millis\"))\n)\n)\nconst task2 = Effect.succeed(\"task2\").pipe(\nEffect.delay(\"200 millis\"),\nEffect.tap(Console.log(\"task2 done\")),\nEffect.onInterrupt(() =>\nConsole.log(\"task2 interrupted\").pipe(Effect.delay(\"100 millis\"))\n)\n)\n\nconst program = Effect.raceWith(task1, task2, {\nonSelfDone: (exit) => Console.log(`task1 exited with ${exit}`),\nonOtherDone: (exit) => Console.log(`task2 exited with ${exit}`)\n})\n\nEffect.runFork(program)\n// Output:\n// task1 done\n// task1 exited with {\n// \"_id\": \"Exit\",\n// \"_tag\": \"Success\",\n// \"value\": \"task1\"\n// }\n// task2 interrupted"
    }
  ],
  "tags": [
    "Racing"
  ],
  "since": "2.0.0",
  "sourceFile": "/Users/benjacobson/conductor/workspaces/hoogle-effect/san-juan-v1/packages/api/node_modules/effect/dist/dts/effect.d.ts",
  "sourceLine": 18497,
  "githubUrl": "https://github.com/Effect-TS/effect/blob/main/packages/effect/src/effect.ts#L18497"
}