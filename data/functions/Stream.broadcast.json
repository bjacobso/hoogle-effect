{
  "id": "Stream.broadcast",
  "name": "broadcast",
  "module": "Stream",
  "package": "effect",
  "signature": "{ <N extends number>(n: N, maximumLag: number | { readonly capacity: \"unbounded\"; readonly replay?: number; } | { readonly capacity: number; readonly strategy?: \"dropping\" | \"sliding\" | \"suspend\"; readonly replay?: number; }): <A, E, R>(self: Stream<A, E, R>) => Effect<TupleOf<N, Stream<A, E, never>>, never, Scope | R>; <A, E, R, N extends number>(self: Stream<A, E, R>, n: N, maximumLag: number | { readonly capacity: \"unbounded\"; readonly replay?: number; } | { readonly capacity: number; readonly strategy?: \"dropping\" | \"sliding\" | \"suspend\"; readonly replay?: number; }): Effect<TupleOf<N, Stream<A, E, never>>, never, Scope | R>; }",
  "description": "Fan out the stream, producing a list of streams that have the same elements\nas this stream. The driver stream will only ever advance the `maximumLag`\nchunks before the slowest downstream stream.",
  "documentation": "Fan out the stream, producing a list of streams that have the same elements\nas this stream. The driver stream will only ever advance the `maximumLag`\nchunks before the slowest downstream stream.",
  "examples": [
    {
      "code": "import { Console, Effect, Fiber, Schedule, Stream } from \"effect\"\n\nconst numbers = Effect.scoped(\nStream.range(1, 20).pipe(\nStream.tap((n) => Console.log(`Emit ${n} element before broadcasting`)),\nStream.broadcast(2, 5),\nStream.flatMap(([first, second]) =>\nEffect.gen(function*() {\nconst fiber1 = yield* Stream.runFold(first, 0, (acc, e) => Math.max(acc, e)).pipe(\nEffect.andThen((max) => Console.log(`Maximum: ${max}`)),\nEffect.fork\n)\nconst fiber2 = yield* second.pipe(\nStream.schedule(Schedule.spaced(\"1 second\")),\nStream.runForEach((n) => Console.log(`Logging to the Console: ${n}`)),\nEffect.fork\n)\nyield* Fiber.join(fiber1).pipe(\nEffect.zip(Fiber.join(fiber2), { concurrent: true })\n)\n})\n),\nStream.runCollect\n)\n)\n\nEffect.runPromise(numbers).then(console.log)\n// Emit 1 element before broadcasting\n// Emit 2 element before broadcasting\n// Emit 3 element before broadcasting\n// Emit 4 element before broadcasting\n// Emit 5 element before broadcasting\n// Emit 6 element before broadcasting\n// Emit 7 element before broadcasting\n// Emit 8 element before broadcasting\n// Emit 9 element before broadcasting\n// Emit 10 element before broadcasting\n// Emit 11 element before broadcasting\n// Logging to the Console: 1\n// Logging to the Console: 2\n// Logging to the Console: 3\n// Logging to the Console: 4\n// Logging to the Console: 5\n// Emit 12 element before broadcasting\n// Emit 13 element before broadcasting\n// Emit 14 element before broadcasting\n// Emit 15 element before broadcasting\n// Emit 16 element before broadcasting\n// Logging to the Console: 6\n// Logging to the Console: 7\n// Logging to the Console: 8\n// Logging to the Console: 9\n// Logging to the Console: 10\n// Emit 17 element before broadcasting\n// Emit 18 element before broadcasting\n// Emit 19 element before broadcasting\n// Emit 20 element before broadcasting\n// Logging to the Console: 11\n// Logging to the Console: 12\n// Logging to the Console: 13\n// Logging to the Console: 14\n// Logging to the Console: 15\n// Maximum: 20\n// Logging to the Console: 16\n// Logging to the Console: 17\n// Logging to the Console: 18\n// Logging to the Console: 19\n// Logging to the Console: 20\n// { _id: 'Chunk', values: [ undefined ] }"
    }
  ],
  "tags": [
    "utils"
  ],
  "since": "2.0.0",
  "sourceFile": "/Users/benjacobson/conductor/workspaces/hoogle-effect/san-juan-v1/packages/api/node_modules/effect/dist/dts/Stream.d.ts",
  "sourceLine": 598,
  "githubUrl": "https://github.com/Effect-TS/effect/blob/main/packages/effect/src/Stream.ts#L598"
}